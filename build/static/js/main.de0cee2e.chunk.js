(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{24:function(e,t,n){e.exports=n(35)},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(11),o=n(0),r=n.n(o),c=n(20),l=n.n(c),s=n(17),i=n(23),u=n(2),p=n(3),d=n(5),h=n(4),m=n(6),f="https://petful-server-glen-muhiddin.herokuapp.com/api",E=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Welcome to GlenM Pet Adoption Page")),r.a.createElement("p",null,"The GlenM is the place for pet adoptions. We have a large selection of cats and dogs at our GlenM Campus. Our animals are spayed-neutered, microchipped and given age-appropriate vaccines."),r.a.createElement(a.b,{to:"/adoption"},r.a.createElement("button",{type:"button"},"Enter site"))))}}]),t}(o.Component),b=r.a.createContext({people:[],cats:[],dogs:[]}),v=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={name:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.name;n.context.onAddPerson(t),n.props.add(t),n.props.queueLine(),n.setState({name:""})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Please wait in line for your turn to adopt"),r.a.createElement("p",null,"Enter your info below and click submit to wait in line"),r.a.createElement("label",{htmlFor:"name"},"Please enter name"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Submit name")))}}]),t}(o.Component);v.contextType=b;var g=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.context.dogs,t=e.age,n=e.breed,a=e.description,o=e.gender,c=e.imageURL,l=e.name,s=e.story;return r.a.createElement("div",{className:"pet"},r.a.createElement("h2",null,l),r.a.createElement("img",{src:c,alt:"pet up for adoption"}),r.a.createElement("p",null,"Age: ",t),r.a.createElement("p",null,"Breed: ",n),r.a.createElement("p",null,"Gender: ",o),r.a.createElement("p",null,"Description: ",a),r.a.createElement("p",null,"Story: ",s),this.props.adopt&&r.a.createElement("button",{onClick:this.props.demoAdopt},"Adopt Dog"))}}]),t}(o.Component);g.contextType=b;var j=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.context.cats,t=e.age,n=e.breed,a=e.description,o=e.gender,c=e.imageURL,l=e.name,s=e.story;return r.a.createElement("div",{className:"pet"},r.a.createElement("h2",null,l),r.a.createElement("img",{src:c,alt:"Cat up for adoption"}),r.a.createElement("p",null,"Age: ",t),r.a.createElement("p",null,"Breed: ",n),r.a.createElement("p",null,"Gender: ",o),r.a.createElement("p",null,"Description: ",a),r.a.createElement("p",null,"Story: ",s),this.props.adopt&&r.a.createElement("button",{onClick:this.props.demoAdopt},"Adopt Cat"))}}]),t}(o.Component);j.contextType=b;var y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={currentUser:"",userCanAdopt:!1,interval:null},n.componentWillUnmount=function(){clearInterval(n.state.interval)},n.addPerson=function(e){n.setState({currentUser:e})},n.getInLine=function(){var e=0,t=setInterval((function(){n.context.onDeletePerson(),n.context.onRandomAdoption(),n.context.people[1]===n.state.currentUser&&setInterval((function(){if(4===e)return clearInterval();n.context.onQueuePerson(),e++,console.log(e)}),2e3),n.userReady()}),2e3);n.setState({interval:t})},n.userReady=function(){n.context.people[1]===n.state.currentUser&&(clearInterval(n.state.interval),n.setState({userCanAdopt:!0}))},n.adoptCat=function(){n.context.onDeleteCat(),n.context.onDeletePerson(),n.props.history.push({pathname:"/success",state:n.context.cats})},n.adoptDog=function(){n.context.onDeleteDog(),n.context.onDeletePerson(),n.props.history.push({pathname:"/success",state:n.context.dogs})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Get Ready to Adopt!"),r.a.createElement("p",null,"The following people are in line for adoption"),r.a.createElement("ul",null,this.context.people.map((function(t){return r.a.createElement("li",{key:e.context.people+Math.random()},t)}))),!this.state.currentUser&&r.a.createElement(v,{add:this.addPerson,queueLine:this.getInLine}),this.state.currentUser&&!this.state.userCanAdopt&&r.a.createElement("p",null,"Excellent! Please wait in line. When your name appears, you will be able to adopt a pet!"),this.state.userCanAdopt&&r.a.createElement("h2",null,"Your turn!"),r.a.createElement(g,{adopt:this.state.userCanAdopt,demoAdopt:this.adoptDog}),r.a.createElement(j,{adopt:this.state.userCanAdopt,demoAdopt:this.adoptCat}))}}]),t}(o.Component);y.contextType=b;var O=n(10),P=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){console.log(this.props.location.state);var e=this.props.location.state,t=e.imageURL,n=e.name;return r.a.createElement("main",null,r.a.createElement("h2",null,"Here is your new pet!"),r.a.createElement("p",null,"You have adopted ",n),r.a.createElement("img",{src:t,alt:"a brand new pet!"}),r.a.createElement(a.b,{to:"/adoption"},"Return to adoption page"))}}]),t}(o.Component),C=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={people:[],cats:[],dogs:[]},n.addPeople=function(e){fetch("".concat(f,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}),n.setState({people:[].concat(Object(i.a)(n.state.people),[e])})},n.queuePerson=function(){fetch("".concat(f,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:"Test Person ".concat(Math.floor(100*Math.random()))})}).then((function(e){if(201===e.status)return fetch("".concat(f,"/people")).then((function(e){return e.json()})).then((function(e){n.setState({people:e})}));throw new Error("The post request failed")})).catch((function(e){console.error(e)}))},n.deletePeople=function(){fetch("".concat(f,"/people"),{method:"DELETE"}).then((function(e){if(201===e.status)return fetch("".concat(f,"/people")).then((function(e){return e.json()})).then((function(e){n.setState({people:e})}));throw new Error("The delete request failed")})).catch((function(e){console.error(e)}))},n.deleteDog=function(){fetch("".concat(f,"/dogs"),{method:"DELETE"}).then((function(e){if(201===e.status)return fetch("".concat(f,"/dogs")).then((function(e){return e.json()})).then((function(e){n.setState({dogs:e})}));throw new Error("The delete request failed")})).catch((function(e){console.error(e)}))},n.deleteCat=function(){fetch("".concat(f,"/cats"),{method:"DELETE"}).then((function(e){if(201!==e.status)throw new Error("Delete request failed");fetch("".concat(f,"/cats")).then((function(e){return e.json()})).then((function(e){n.setState({cats:e})}))})).catch((function(e){console.err(e)}))},n.randomAdoption=function(){1===Math.floor(2*Math.random())?n.deleteCat():n.deleteDog()},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(f,"/people")),fetch("".concat(f,"/cats")),fetch("".concat(f,"/dogs"))]).then((function(e){var t=Object(s.a)(e,3),n=t[0],a=t[1],o=t[2];return n.ok?a.ok?o.ok?Promise.all([n.json(),a.json(),o.json()]):o.json().then((function(e){return Promise.reject(e)})):a.json().then((function(e){return Promise.reject(e)})):n.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var n=Object(s.a)(t,3),a=n[0],o=n[1],r=n[2];return e.setState({people:a,cats:o,dogs:r})})).catch((function(e){console.error({error:e})}))}},{key:"render",value:function(){var e={people:this.state.people,cats:this.state.cats,dogs:this.state.dogs,onAddPerson:this.addPeople,onDeletePerson:this.deletePeople,onDeleteDog:this.deleteDog,onDeleteCat:this.deleteCat,onQueuePerson:this.queuePerson,onRandomAdoption:this.randomAdoption};return r.a.createElement("div",null,r.a.createElement(b.Provider,{value:e},r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/",component:E}),r.a.createElement(O.a,{exact:!0,path:"/adoption",component:y}),r.a.createElement(O.a,{path:"/success",component:P}))))}}]),t}(o.Component);n(34);l.a.render(r.a.createElement(a.a,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.de0cee2e.chunk.js.map